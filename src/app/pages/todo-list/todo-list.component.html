<div class="todo-container">
  <div class="todo-box ali">
    <h2>Lista de Tarefas</h2>

    <button class="btn btn-add-task" (click)="openModal(taskModal)">Adicionar Nova Tarefa</button>

    <!-- Exibir mensagem se não houver tarefas -->
    <p *ngIf="tasks.length === 0" class="no-tasks-message">Nenhuma tarefa registrada.</p>


    <ul class="task-list" *ngIf="tasks.length > 0">
      <li class="task-item" *ngFor="let task of paginatedTasks" [ngClass]="{'completed': task.completed}">
        <div class="task-content">
          <span class="task-title">{{ task.title }}</span>
          <p class="task-description">{{ task.description }}</p>
        </div>
        <div class="task-actions">
          <button class="btn-complete" (click)="completeTask(task)">
            {{ task.completed ? 'Concluído' : 'Concluir' }}
          </button>
          <button class="btn-edit" (click)="openModal(taskModal, true, task)" [disabled]="task.completed">Editar</button>
          <button class="btn-remove" (click)="removeTask(task)">Remover</button>
        </div>
      </li>
    </ul>

    
    <div class="pagination" *ngIf="tasks.length > 0">
      <button (click)="previousPage()" [disabled]="currentPage === 1">Anterior</button>
      <span>Página {{ currentPage }} de {{ totalPages }}</span>
      <button (click)="nextPage()" [disabled]="currentPage === totalPages">Próxima</button>
    </div>

    
    <ng-template #taskModal let-modal>
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">{{ isEditMode ? 'Editar Tarefa' : 'Adicionar Tarefa' }}</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="modalForm" (ngSubmit)="addTask(modal)">
          <div class="form-group">
            <input formControlName="taskTitle" type="text" placeholder="Título da Tarefa" class="form-control" />
          </div>
          <div class="form-group">
            <textarea formControlName="taskDescription" placeholder="Descrição da Tarefa" class="form-control"></textarea>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary" [disabled]="modalForm.invalid">{{ isEditMode ? 'Salvar' : 'Adicionar' }}</button>
            <button type="button" class="btn btn-secondary" (click)="modal.dismiss('cancel click')">Cancelar</button>
          </div>
        </form>
      </div>
    </ng-template>
  </div>
</div>
